<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Upload and Send Images</title>
</head>
<body style="font-family: sans-serif; text-align: center; padding: 50px;">
  <h2>Upload and Email Images</h2>
  <input type="file" id="imageInput" accept="image/*" multiple />
  <br><br>
  <button onclick="sendEmail()">Send to Email</button>

  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script>
    (function(){
      emailjs.init("g42tnmFpURrlkWGUF"); // your public key
    })();

    async function sendEmail() {
      const input = document.getElementById('imageInput');
      const files = input.files;

      if (!files.length) {
        alert("Please select at least one image.");
        return;
      }

      const base64Images = [];

      for (const file of files) {
        const base64 = await toBase64(file);
        base64Images.push(`<img src="${base64}" style="max-width: 100%; max-height: 400px; margin-bottom: 20px;" />`);
      }

      const emailParams = {
        images: base64Images.join("<br>")
      };

      emailjs.send("service_anlae55", "template_xxka83q", emailParams)
        .then(() => alert("Email sent successfully!"))
        .catch((error) => alert("Failed to send email: " + error.text));
    }

    function toBase64(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = () => resolve(reader.result);
        reader.onerror = reject;
      });
    }
  </script>
</body>
</html>
