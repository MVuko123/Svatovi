<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Upload and Send Images via Link</title>
</head>
<body style="font-family: sans-serif; text-align: center; padding: 50px;">
  <h2>Upload and Email Images</h2>
  <input type="file" id="imageInput" accept="image/*" multiple />
  <br><br>
  <button onclick="sendEmail()">Send to Email</button>

  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script>
    (function(){
      emailjs.init("g42tnmFpURrlkWGUF"); // Your public key
    })();

    async function sendEmail() {
      const input = document.getElementById('imageInput');
      const files = input.files;

      if (!files.length) {
        alert("Please select at least one image.");
        return;
      }

      const uploadedLinks = [];

      for (const file of files) {
        const formData = new FormData();
        formData.append("file", file);

        const response = await fetch("https://store1.gofile.io/uploadFile", {
          method: "POST",
          body: formData
        });

        const result = await response.json();
        if (result.status === "ok") {
          uploadedLinks.push(`
            <a href="${result.data.downloadPage}" target="_blank"
               style="display: inline-block; margin: 10px 0; padding: 10px 16px; background-color: #007BFF; color: white; text-decoration: none; border-radius: 6px;">
              View Image
            </a>
          `);
        }
      }

      if (!uploadedLinks.length) {
        alert("No images were uploaded.");
        return;
      }

      const emailParams = {
        images: uploadedLinks.join("<br>")
      };

      emailjs.send("service_anlae55", "template_xxka83q", emailParams)
        .then(() => alert("Email sent successfully!"))
        .catch((error) => alert("Failed to send email: " + error.text));
    }
  </script>
</body>
</html>
